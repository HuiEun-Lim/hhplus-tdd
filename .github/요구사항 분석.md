# 📌 요구사항

- PATCH `/point/{id}/charge` : 포인트를 충전한다.
- PATCH `/point/{id}/use` : 포인트를 사용한다.
- GET `/point/{id}` : 포인트를 조회한다.
- GET `/point/{id}/histories` : 포인트 내역을 조회한다.
- 잔고가 부족할 경우, 포인트 사용은 실패하여야 합니다.
- 동시에 여러 건의 포인트 충전, 이용 요청이 들어올 경우 순차적으로 처리되어야 합니다.


# 📌 정책

- 최대 포인트는 1,000,000 포인트이다.
- 포인트는 1,000 단위로 충전이 가능하다.
- 충전한 내역이 없는 사용자 계정으로는 포인트를 사용할 수 없다.
- 충전한 내역이 없는 사용자 계정으로는 포인트 내역을 조회할 수 없다.
- 사용하려는 포인트가 충전한 포인트보다 클 수 없다.
- 충전 시 충전 포인트가 0일 수 없다.
- 사용 시 사용 포인트가 0일 수 없다.


# 📌 분석

- PATCH `/point/{id}/charge` : 포인트를 충전한다.
    - 충전 포인트가 0이면 실패한다.
    - 충전 포인트가 음수면 실패한다.
    - 충전 포인트가 1,000,000이 넘으면 실패한다.
    - 충전 포인트가  1,000보다 작으면 실패한다.
    - 충전 포인트가  1,000단위가 아니면 실패한다.
    - 포인트 히스토리에 충전 내역을 저장한다.
    - 사용자 포인트에 기존 포인트 + 충전 포인트를 저장한다.


- PATCH `/point/{id}/use` : 포인트를 사용한다.
    - 사용 포인트가 0이하면 실패한다.
    - 사용 포인트가 기존 포인트보다 적다면 실패한다.
    - 포인트 히스토리에 사용 내역을 저장한다.
    - 사용자 포인트에 기존 포인트 - 사용 포인트를 저장한다.


- GET `/point/{id}` : 포인트를 조회한다.


- GET `/point/{id}/histories` : 포인트 내역을 조회한다.
    - 포인트 내역이 없는 회원일 경우 실패한다.
    - 포인트 내역을 조회한다.